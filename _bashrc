# vim: ft=sh

# shortcuts
alias ls='ls -G'
alias ll='ls -hl'
alias l='ls -l'
alias lla='ls -ahl'
alias ..='cd ..'
alias mkdir='mkdir -pv'

# go to actual directory when CDing into a symlink
set -P

# shortcut for finding a keyword in files 
# (uses Ag or Ack depending on what's available)
if hash ag 2>/dev/null; then
    function f { 
        ag -i "$@"
    }
else
    function f { 
        ack "$@"
    }
fi

# find a file by a certain name quickly
function s { find . -name $@;}

# get stats for a domain
function fs { ping -o "$1" | grep "$1" | grep -v statistics; }

# remove all .pyc files under current directory and subdirectories
function clean_pyc { find . -name "*.pyc" -delete;}

# go to a reference project
function goto { cd `cd ${HOME}/ref/$1 && pwd -P`; }
_goto_complete () {
    local cur="$2"
    COMPREPLY=( $(goto && compgen -d -- "${cur}" ) )
}
complete -o nospace -F _goto_complete -S/ goto

# quick http server for current directory
server() {
    python -m SimpleHTTPServer $1
}

# using powerline for nice prompt (custom powerline prompt below to add newlines)
. ${HOME}/dotfiles/utilities/powerline/powerline/bindings/bash/powerline.sh
_powerline_prompt() {
	local last_exit_code=$?
	[[ -z "$POWERLINE_OLD_PROMPT_COMMAND" ]] ||
		eval $POWERLINE_OLD_PROMPT_COMMAND
	PS1="\n$($POWERLINE_COMMAND shell left -r bash_prompt --last_exit_code=$last_exit_code)\r\n$ "
	_powerline_tmux_set_pwd
	return $last_exit_code
}


# pythonbrew stuff
[[ -s $HOME/.pythonbrew/etc/bashrc ]] && source $HOME/.pythonbrew/etc/bashrc

# Env variables and functions for virtualenvwrapper.
# virtualenv must be loaded after pythonbrew
export WORKON_HOME=$HOME/dev/virtualenvs
if [ -f $HOME/.pythonbrew/pythons/Python-2.7.2/bin/virtualenvwrapper.sh ]; then
    . $HOME/.pythonbrew/pythons/Python-2.7.2/bin/virtualenvwrapper.sh
else
    . /usr/local/bin/virtualenvwrapper.sh
fi

### Added by the Heroku Toolbelt
export PATH="/usr/local/php5/bin:/usr/local/heroku/bin:$HOME/local/bin:$PATH"

### some python tools for convenience
export PYTHONPATH="${HOME}/dotfiles/utilities/:${HOME}/tools/:${HOME}/dev/src/django-debug-toolbar/:$PYTHONPATH"

